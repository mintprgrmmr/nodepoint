# 🧨 CHALLENGES & SOLUTIONS – NodePoint

Документ описывает реальные сложности, с которыми столкнулся разработчик при создании проекта NodePoint. Всё по-честному: где тупили, где страдали, где победили.

---

## 🧼 Проблема: пустышки в таблицах после перезагрузки

**Симптом:** после обновления страницы в таблицах появлялись пустые записи.  
**Причина:** localStorage сохранял данные некорректно, а store их заглатывал.  
**Решение:** пересобран механизм сохранения/загрузки, добавлена очистка мусорных данных, переработан `StorageService`.

---

## 🎭 Проблема: тема не применялась после перезапуска

**Симптом:** пользователь выбирал тему, а после перезагрузки всё сбрасывалось.  
**Решение:** реализовано сохранение выбора темы в localStorage и автоприменение при загрузке.

---

## 🏷️ Проблема: привязка улиц к городам не работала

**Симптом:** все улицы отображались независимо от выбранного города.  
**Причина:** отсутствие фильтрации в `StreetStore`.  
**Решение:** добавлена фильтрация по `cityId`, переработана логика переключения города.

---

## 🧻 Проблема: данные демо не загружались после клика

**Симптом:** кнопка «Загрузить демо» ничего не делала.  
**Причина:** была потеряна привязка метода к кнопке.  
**Решение:** перепривязана логика в `MainController`, добавлен автоматический reload после загрузки.

---

## 💥 Проблема: исчезновение тем и кнопок после изменений

**Симптом:** после рефакторинга темы перестали отображаться.  
**Причина:** забытая регистрация классов или утерянный `xtype`.  
**Решение:** ручная проверка структуры `Main.js` и `MainController.js`, восстановление привязок и CSS-классов.

---

## 📏 Проблема: визуальный бардак между блоками

**Симптом:** кнопки и блоки тулбара слипались, нечитабельно.  
**Решение:** добавлен визуальный разделитель (`tbseparator`) между логическими блоками.

---

## 📂 Проблема: неочевидная структура проекта

**Симптом:** часть файлов лежала не по местам, было неясно, где что искать.  
**Решение:** установлена структура `model/`, `store/`, `utils/`, `view/main/`. Всё лишнее удалено, всё нужное — перенесено.

---

## 📉 Проблема: редактирование строк не сохранялось

**Симптом:** при клике вне строки изменения терялись.  
**Решение:** реализован `RowEditing` с принудительным `store.sync()` при завершении редактирования.

---

## 📋 Проблема: время последнего сохранения не отображалось

**Симптом:** в тулбаре всегда было пусто.  
**Решение:** добавлен вызов `StorageService.getSavedAt()` и форматирование даты, отображение при каждом `save()`.

---

> Проект заставил погрузиться в глубину фреймворка и научил дебажить неочевидные баги без stack trace.
> 🚧 Документ пополняется по мере работы...